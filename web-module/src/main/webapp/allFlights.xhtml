<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui" >
<h:head>
    <meta charset="UTF-8"/>
    <title>Passengers</title>
</h:head>
<h:body>
    <h1>Flights of #{partnerController.airlineCompany.name}</h1>


    <h:form>
        <h:panelGrid columns="2" >
            <h:outputLabel value="To:" />
            <h:selectOneMenu id="filterDestination" value="#{partnerController.filterDestinationID}" >
                <f:selectItem itemValue="0" itemLabel="" />
                <f:selectItems value="#{partnerController.locationListForPartner}" var="location" itemLabel="#{location.city}" itemValue="#{location.id}"  />
                <f:ajax event="valueChange" listener="#{partnerController.filterWithDestination}"   render="flights" />
            </h:selectOneMenu>


            <p:calendar id="FromDate" value="#{partnerController.departureMin}" showOn="button"
                        maxdate="#{partnerController.departureMax}" >
                <p:ajax event="dateSelect" listener="#{partnerController.onToDateSelect}" update="ToDate flights"></p:ajax>
                <p:ajax event="change" update="ToDate"></p:ajax>
            </p:calendar>

            <p:calendar id="ToDate" value="#{partnerController.departureMax}" showOn="button"
                        mindate="#{partnerController.departureMin}">
                <p:ajax event="dateSelect" listener="#{partnerController.onToDateSelect}" update="FromDate flights"></p:ajax>
                <p:ajax event="change" update="FromDate"></p:ajax>
            </p:calendar>
        </h:panelGrid>
    </h:form>
    <h:dataTable id="flights" value="#{partnerController.flights}" var="flight">
        <h:column>
            <f:facet name="header">
                <h:outputText value="From"/>
            </f:facet>
            <h:outputText value="#{flight.from.city}"/>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="To"/>
            </f:facet>
            <h:outputText value="#{flight.to.city}"/>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Arrival Date"/>
            </f:facet>
            <h:outputText value="#{flight.arrivalTime}"/>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Departure Date"/>
            </f:facet>
            <h:outputText value="#{flight.departureTime}"/>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Available places"/>
            </f:facet>
            <h:outputText value="#{flight.availablePlaces}"/>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Total places"/>
            </f:facet>
            <h:outputText value="#{flight.totalPlaces}"/>
        </h:column>
        <h:column>

            <h:form>
                <h:commandLink action="#{editFlightController.editFlight(flight.id)}" value="Edit flight ">
                </h:commandLink>
            </h:form>
        </h:column>
    </h:dataTable>
    <h3> #{flightController.departureDate}</h3>

</h:body>
</html>


